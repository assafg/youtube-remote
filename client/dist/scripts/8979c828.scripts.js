"use strict";angular.module("youtubeRemoteApp",["ui.bootstrap"]).config(["$routeProvider",function(a){a.when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl"}).when("/remote",{templateUrl:"views/remote.html",controller:"RemoteCtrl"}).when("/player",{templateUrl:"views/player.html",controller:"PlayerCtrl"}).when("/main",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/welcome",{templateUrl:"views/welcome.html",controller:"WelcomeCtrl"}).otherwise({redirectTo:"/welcome"})}]).run(["Socket",function(){}]),angular.module("youtubeRemoteApp").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("youtubeRemoteApp").controller("RemoteCtrl",["$scope","$http","$rootScope","$location",function(a,b,c){a.searchTerm="",a.items,a.connect=function(){c.pairKey=a.remoteKey,a.connected=!0},a.searchYoutube=function(){b.jsonp("https://www.googleapis.com/youtube/v3/search?key=AIzaSyBL6PS3qcjaI4KSCrysejNsFHNQkHtXShs&part=snippet&q="+a.searchTerm+"&callback=JSON_CALLBACK").success(function(b){a.items=b.items})},a.play=function(a){b.post("/api/play",{pairKey:c.pairKey,videoId:a}).success(function(){alert("playing video")})}}]),angular.module("youtubeRemoteApp").controller("PlayerCtrl",["$scope","$location","$window","$rootScope","$modal","Socket",function(a,b,c,d,e,f){a.videoId="TG4f9zR5yzY",a.playing=!1,a.play=function(){a.playing=!0,c.player.loadVideoById({videoId:a.videoId,suggestedQuality:"large"})},d.$watch("localKey",function(){d.localKey});var g=f.getSocket();g.on("play",function(b){console.log("onPlay"),a.connected=!0,a.videoId=b.videoId,a.play()})}]),angular.module("youtubeRemoteApp").controller("LoginCtrl",["$scope","$http","$location","$rootScope",function(a,b,c,d){a.error="",a.login=function(){b.post("/api/login",{username:a.username,password:a.password}).success(function(b){b?(a.error="",d.user=a.username,c.url("/main")):a.error="Login Failed"})}}]),angular.module("youtubeRemoteApp").controller("WelcomeCtrl",["$scope","$location",function(a,b){a.getStarted=function(){b.url("/main")}}]),angular.module("youtubeRemoteApp").service("Socket",["$window","$location","$rootScope",function(a,b,c){var d=b.protocol()+"://"+b.host(),e=a.io.connect(d);return e.on("localKey",function(a){c.$eval(c.localKey=a),c.$apply()}),{getSocket:function(){return e}}}]);